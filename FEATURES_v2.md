# Riverchain 系统 v2.0 功能详解

## 🎯 升级概览

本次升级为 Riverchain 智能投资决策系统带来了更强大的灵活性和更低的使用门槛：

- ✅ **核心评估标准可自定义**
- ✅ **支持 6 种 AI 模型**
- ✅ **2 个免费模型，无需 API Key**
- ✅ **每个智能体独立选择模型**

---

## 📋 功能详解

### 1. 核心分析师 System Prompt 编辑

#### 功能入口
设置 → 核心分析师 Prompt 标签页

#### 可自定义内容

##### 红旗警示标准
```
默认:
- 运营年限 < 5年
- 年收入 < HK$ 10M
- 存在诉讼记录

自定义示例:
- 运营年限 < 3年  (放宽标准)
- 年收入 < HK$ 20M  (提高要求)
- 添加新的红旗条件
```

##### 评分权重
```
默认:
- Stage 1: 40%
- Stage 2: 60%

自定义示例:
- Stage 1: 50%
- Stage 2: 50%  (平衡两个阶段)
```

##### LTV 限制
```
默认:
- 保理业务: 90%
- 发票融资: 70%

自定义示例:
- 保理业务: 85%  (更保守)
- 发票融资: 75%  (更宽松)
```

##### 评估维度
```
可以添加新的评估维度:
- ESG 评分
- 行业趋势
- 技术创新能力
- 供应链稳定性
```

##### 风险等级区间
```
默认:
- 80-100: 低风险 → 批准
- 60-79: 中等风险 → 有条件批准
- 0-59: 高风险 → 拒绝

自定义示例:
- 85-100: 低风险 → 批准  (更严格)
- 70-84: 中等风险 → 有条件批准
- 0-69: 高风险 → 拒绝
```

#### 使用场景

**场景 1: 初创企业专用版本**
```
放宽运营年限要求:
- 运营年限 ≥ 2年 (而非 5年)
- 增加创新能力评估维度
- 调整评分标准
```

**场景 2: 大型企业专用版本**
```
提高各项标准:
- 运营年限 ≥ 10年
- 年收入 ≥ HK$ 100M
- 降低 LTV 上限
```

**场景 3: 特定行业定制**
```
添加行业特定标准:
- 建筑行业: 评估项目完成率
- 科技行业: 评估研发投入比例
- 制造业: 评估产能利用率
```

---

### 2. 多 AI 模型支持

#### 模型清单

##### 🆓 免费模型（推荐新手）
| 模型 | 提供商 | 特点 | 适用场景 |
|-----|--------|------|----------|
| Genspark Pro | Genspark | 平衡性能与质量 | 日常评估、快速测试 |
| Genspark Lite | Genspark | 快速响应 | 轻量级评估、批量处理 |

**优势**:
- ✅ 无需配置
- ✅ 立即可用
- ✅ 零成本
- ✅ 适合学习和测试

##### 💳 Perplexity 模型
| 模型 | 特点 | 价格 | 适用场景 |
|-----|------|------|----------|
| Sonar Pro | 快速、稳定 | 中等 | 标准生产环境 |
| Sonar Reasoning | 深度推理 | 较高 | 复杂案例分析 |

**API Key 获取**: https://www.perplexity.ai/settings/api

##### 🔷 Google Gemini
| 模型 | 特点 | 价格 | 适用场景 |
|-----|------|------|----------|
| Gemini 2.0 Flash | 最新、最快 | 低 | 高质量快速评估 |

**API Key 获取**: https://makersuite.google.com/app/apikey

##### 🔹 DeepSeek
| 模型 | 特点 | 价格 | 适用场景 |
|-----|------|------|----------|
| DeepSeek R1 | 深度推理 | 中等 | 需要详细分析的复杂案例 |

**API Key 获取**: https://platform.deepseek.com/api_keys

#### 模型切换

**全局模型**:
- 在设置页面选择默认模型
- 影响核心分析师的评估

**智能体级别**:
- 每个自定义智能体可独立选择模型
- 支持混合使用免费和付费模型

---

### 3. 灵活的配置方案

#### 方案 1: 完全免费
```
配置:
- 核心分析师: Genspark Pro
- 自定义智能体: Genspark Lite
- API Key: 不需要

成本: $0
优势: 零成本，适合测试和学习
劣势: 质量可能略低于商业模型
```

#### 方案 2: 平衡型（推荐）
```
配置:
- 核心分析师: Gemini 2.0 Flash
- 自定义智能体 1: Genspark Pro (免费)
- 自定义智能体 2: Genspark Lite (免费)
- API Key: 仅配置 Google

成本: 低
优势: 核心评估高质量，辅助评估免费
劣势: 需要配置一个 API Key
```

#### 方案 3: 专业型
```
配置:
- 核心分析师: Gemini 2.0 Flash
- 宏观经济专家: DeepSeek R1
- 法律顾问: Sonar Reasoning
- 财务审计: Sonar Pro
- API Key: Google、DeepSeek、Perplexity

成本: 高
优势: 最高质量分析，多角度深度评估
劣势: 成本较高，需要多个 API Key
```

#### 方案 4: 混合型
```
配置:
- 核心分析师: Gemini 2.0 Flash (快速)
- 深度分析专家: DeepSeek R1 (仅复杂案例启用)
- 辅助专家 1-3: Genspark Pro (免费)
- API Key: Google、DeepSeek

成本: 中等
优势: 灵活控制成本，关键评估高质量
劣势: 需要手动管理智能体启用状态
```

---

### 4. 自定义智能体模型选择

#### 功能说明
每个自定义智能体都可以独立选择使用的 AI 模型。

#### 配置步骤
1. 点击"新增智能体"
2. 填写智能体信息
3. 在"使用模型"下拉框中选择
4. 保存配置

#### 使用策略

**策略 1: 按重要性分配**
```
核心分析师 → Gemini 2.0 Flash (最重要)
宏观经济专家 → DeepSeek R1 (重要)
行业分析师 → Sonar Pro (中等)
辅助专家 → Genspark Pro (免费)
```

**策略 2: 按复杂度分配**
```
简单案例 → 全部使用 Genspark Pro (免费)
中等复杂 → 核心用 Gemini，其他免费
复杂案例 → 核心用 Gemini，关键智能体用 DeepSeek
```

**策略 3: 成本控制**
```
日常评估 → 仅启用免费模型的智能体
重要案例 → 临时启用付费模型的智能体
月底预算紧张 → 切换到免费模型
```

---

### 5. 实际应用案例

#### 案例 1: 创业公司评估系统

**需求**:
- 针对初创企业
- 放宽运营年限要求
- 增加创新能力评估
- 控制成本

**配置**:
```
1. 编辑核心 Prompt:
   - 运营年限 ≥ 2年
   - 年收入 ≥ HK$ 5M
   - 添加"创新能力"评估维度

2. 模型选择:
   - 核心分析师: Genspark Pro (免费)
   - 创新评估专家: Genspark Lite (免费)
   - 财务分析师: Gemini 2.0 Flash (关键评估)

3. API Key:
   - 仅配置 Google (用于财务分析)
```

#### 案例 2: 传统银行风控系统

**需求**:
- 严格的评估标准
- 多角度深度分析
- 不考虑成本

**配置**:
```
1. 编辑核心 Prompt:
   - 运营年限 ≥ 10年
   - 年收入 ≥ HK$ 50M
   - LTV 上限降低 10%
   - 添加"信用历史"评估维度

2. 模型选择:
   - 核心分析师: Gemini 2.0 Flash
   - 宏观经济专家: DeepSeek R1
   - 法律合规专家: Sonar Reasoning
   - 财务审计专家: Sonar Pro
   - 行业分析师: Gemini 2.0 Flash

3. API Key:
   - 配置所有提供商的 Key
```

#### 案例 3: 快速尽职调查服务

**需求**:
- 速度优先
- 批量处理
- 成本控制

**配置**:
```
1. 使用默认核心 Prompt

2. 模型选择:
   - 核心分析师: Gemini 2.0 Flash (最快)
   - 所有自定义智能体: Genspark Lite (快速且免费)

3. API Key:
   - 仅配置 Google
```

---

### 6. 高级技巧

#### 技巧 1: 动态 Prompt 切换
```
方法: 为不同场景保存多个 Prompt 版本

1. 创建 prompt_startup.txt (初创企业版)
2. 创建 prompt_enterprise.txt (大型企业版)
3. 创建 prompt_strict.txt (严格版)
4. 根据评估对象，复制粘贴对应的 Prompt
```

#### 技巧 2: 成本优化
```
策略:
1. 日常评估使用免费模型
2. 月初预算充足时使用高级模型
3. 重要案例手动切换到付费模型
4. 使用混合配置平衡质量和成本
```

#### 技巧 3: 质量监控
```
方法:
1. 定期用相同案例测试不同模型
2. 对比免费和付费模型的结果差异
3. 根据实际需求选择合适的模型
4. 记录模型表现，优化配置
```

#### 技巧 4: 智能体组合
```
推荐组合:
1. 核心分析师 (必需)
2. 宏观经济专家 (推荐)
3. 行业分析师 (推荐)
4. 法律顾问 (可选)
5. 财务审计师 (可选)

模型分配:
- 核心 + 宏观 → 高级模型
- 行业 → 中级模型
- 法律 + 财务 → 免费模型或按需启用
```

---

## 🎓 最佳实践

### 1. 初次使用
- ✅ 使用默认配置（免费模型）
- ✅ 测试所有功能
- ✅ 了解不同模型的表现差异

### 2. 正式使用前
- ✅ 根据业务需求编辑核心 Prompt
- ✅ 选择合适的模型配置方案
- ✅ 配置必要的 API Key
- ✅ 进行充分测试

### 3. 生产环境
- ✅ 使用平衡型或专业型配置
- ✅ 定期审查和更新 Prompt
- ✅ 监控模型表现和成本
- ✅ 根据反馈优化配置

### 4. 成本控制
- ✅ 优先使用免费模型
- ✅ 仅在关键评估使用付费模型
- ✅ 根据案例复杂度动态调整
- ✅ 定期审查 API 使用量

---

## 📞 技术支持

### 常见问题

**Q: 免费模型和付费模型的主要差异？**
A: 免费模型适合日常评估和测试，付费模型在复杂案例分析、推理深度、响应质量上更优。

**Q: 可以混合使用不同模型吗？**
A: 可以！核心分析师和每个自定义智能体都可以独立选择模型。

**Q: 如何知道哪个模型最适合我？**
A: 建议先使用免费模型测试，然后逐步尝试付费模型，根据实际效果选择。

**Q: 修改核心 Prompt 会影响已有的评估结果吗？**
A: 不会。Prompt 修改只影响未来的评估，历史结果不变。

**Q: API Key 安全吗？**
A: API Key 只保存在浏览器 LocalStorage 中，不会上传到服务器。

### 获取帮助
- 📖 完整文档: README.md
- 🚀 快速开始: QUICK_START.md
- 📝 升级说明: UPGRADE_NOTES.md
- 📊 项目总结: PROJECT_SUMMARY.md

---

**Riverchain 智能投资决策系统** v2.0 © 2024

现在就开始体验更强大、更灵活的 Riverchain 系统！
